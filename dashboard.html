<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" name="viewport">
  <title>Partner Dashboard</title>
  <!-- General CSS Files -->
  <link rel="stylesheet" href="assets/css/app.min.css">
  <link rel="stylesheet" href="assets/bundles/jqvmap/dist/jqvmap.min.css">
  <link rel="stylesheet" href="assets/bundles/weather-icon/css/weather-icons.min.css">
  <link rel="stylesheet" href="assets/bundles/weather-icon/css/weather-icons-wind.min.css">
  <link rel="stylesheet" href="assets/bundles/summernote/summernote-bs4.css">
  <!-- Template CSS -->
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/components.css">
  <!-- Custom style CSS -->
  <link rel="stylesheet" href="assets/css/custom.css">
  <link rel='shortcut icon' type='image/x-icon' href='assets/img/favicon.ico' />
  <!-- General CSS Files -->
  <link rel="stylesheet" href="assets/bundles/datatables/datatables.min.css">
  <link rel="stylesheet" href="assets/bundles/datatables/DataTables-1.10.16/css/dataTables.bootstrap4.min.css">
  <!-- Include Chart.js if needed -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    

    .section-body .section-title {
      font-size: 24px;
      /* Larger font size for emphasis */
      font-weight: bold;
      color: #2596be;
      /* A vibrant color that stands out */
      text-transform: uppercase;
      /* Convert text to uppercase for emphasis */
      margin-bottom: 20px;
      /* Increased bottom margin for spacing */
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      /* Add a subtle text shadow for depth */
      letter-spacing: 1px;
      /* Increase letter spacing for readability */
      text-align: center;
      /* Center-align the text */
    }

    .offer-card {
      cursor: pointer;
      position: relative;
      padding-bottom: 0px;
    }

    .offer-card:hover {
      background-color: #2595be94;
      color: black;
    }

    .offer-label {
  font-size: 15px; /* Increase font size for emphasis */
  font-weight: bold;
  color: #333; /* Dark color for better readability */
  margin-bottom: 15px;
  text-align: center;
  text-transform: uppercase; /* Convert text to uppercase for emphasis */
}

.offer-label::after {
  content: ""; /* Add a pseudo-element to create a visual separator */
  display: block;
  width: 50px; /* Adjust the width of the separator */
  height: 2px; /* Adjust the height of the separator */
  background-color: #2595be; /* Use the same color as the offer cards' hover color */
  margin: 10px auto; /* Center the separator and add spacing */
}


    .form-group h6 {
      margin-top: 20px;
      /* Add some space between each title */
    }

    .offer-number {
      text-align: center;
      margin-top: 10px;
      font-size: 18px;
      font-weight: bold;
      color: #333;
    }

    .btn-primary {
      font-size: 12px;
      padding: 10px 20px;
      display: inline-block;
      margin: 0 auto;
    }
  </style>
</head>

<body>
  <div class="loader"></div>
  <div id="app">
    <div class="main-wrapper main-wrapper-1">
      <div class="navbar-bg"></div>
      <nav class="navbar navbar-expand-lg main-navbar">
        <form class="form-inline mr-auto">
          <ul class="navbar-nav mr-3">
            <li><a href="#" data-toggle="sidebar" class="nav-link nav-link-lg collapse-btn"><i
                  class="fas fa-arrow-left"></i></a></li>
            <li class="dropdown dropdown-list-toggle"><a href="#" data-toggle="dropdown" class="nav-link nav-link-lg"><i
                  class="far fa-list-alt"></i></a>
              <div class="dropdown-menu app-dropdown">
                <div class="dropdown-header">Applications</div>
                <div class="dropdown-list-content dropdown-list-message"></div>
              </div>
            </li>
          </ul>
        </form>
        <ul class="navbar-nav navbar-right">
          <li><a href="#" class="nav-link nav-link-lg fullscreen-btn"><i class="fas fa-expand"></i></a></li>
          <li class="dropdown"><a href="#" data-toggle="dropdown"
              class="nav-link dropdown-toggle nav-link-lg nav-link-user"><img alt="image" src="assets/img/user.png"
                class="user-img-radious-style"><span class="d-sm-none d-lg-inline-block"></span></a>
            <div class="dropdown-menu dropdown-menu-right">
              <div class="dropdown-title">Hello</div>
              <div class="dropdown-divider"></div>
              <a href="index.html" class="dropdown-item has-icon text-danger"><i class="fas fa-sign-out-alt"></i>
                Logout</a>
            </div>
          </li>
        </ul>
      </nav>
      <div class="main-sidebar sidebar-style-2">
        <aside id="sidebar-wrapper">
          <div class="sidebar-brand"><a href="index.html"><img alt="image" src="assets/img/logo.png"
                class="header-logo">Partner</a></div>
          <div class="sidebar-user">
            <div class="sidebar-user-picture"><img alt="image" src="assets/img/user.png"></div>
            <div class="sidebar-user-details">
              <div class="user-name">Orange eXtended Store</div>
              <div class="user-role">Partner</div>
            </div>
          </div>
          <ul class="sidebar-menu">
            <li class="menu-header">Welcome</li>
            <li class="dropdown active"><a href="#" class="nav-link has-dropdown"><i
                  class="fas fa-dumpster"></i><span>Photos / Videos</span></a>
              <ul class="dropdown-menu">
                <li class="dropdown">
                  <ul class="dropdown-menu">
                    <li><a class="nav-link" href="#">Add Video / Photo</a></li>
                    <li class="active"><a class="nav-link" href="#">Liste des Q/R</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </aside>
      </div>
      <!-- Main Content -->
      <div class="main-content">
        <section class="section">
          <div class="section-header d-flex justify-content-between align-items-center">
            <h1>Welcome partner </h1>
          </div>
          <div class="section-body">
            <h3 class="section-title">Choose one of the following offers</h3>
            <div class="row">
              <div class="col-12 col-md-6 col-lg-6">
                <div class="offer-label">Offer 1 :</div>
                <div class="card offer-card" id="offer1" onclick="chooseOption(1)">
                  <div class="card-header">
                    <h4>Photos Advertising Package - Showcase your brand via images</h4>
                  </div>
                  <div class="card-body">
                    <p>Possibility to upload only 2 Photos</p>
                    <input type="hidden" id="option1" name="option" value="">
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-6 col-lg-6">
                <div class="offer-label">Offer 2 :</div>
                <div class="card offer-card" id="offer2" onclick="chooseOption(2)">
                  <div class="card-header">
                    <h4>Dynamic Advertising Package - Engage with photos and videos</h4>
                  </div>
                  <div class="card-body">
                    <p>Possibility to upload 2 Photos + 1 Video</p>

                    <input type="hidden" id="option2" name="option" value="">
                  </div>
                </div>
              </div>
            </div>
            <!-- Hidden input to store the chosen option -->
            <input type="hidden" id="option" name="option" value="">
          </div>
        </section>
        <div class="modal-body" id="uploadForm" style="display: none;">
          <div class="d-flex justify-content-center align-items-center" style="height: 100%;">
            <div class="form-group">
              <h6 for="logoFile">Logo:</h6>
              <input type="file" id="logoFile" class="form-control-file" accept="image/*">
              <button class="btn btn-primary mt-2" onclick="uploadFile('logo', this)">Upload Logo</button>
            </div>
            <hr>
            <div class="form-group">
              <h6 for="image1File">Image 1:</h6>
              <input type="file" id="image1File" class="form-control-file" accept="image/*">
              <button class="btn btn-primary mt-2" onclick="uploadFile('image1', this)">Upload Image 1</button>

            </div>
            <hr>
            <div class="form-group">
              <h6 for="image2File">Image 2:</h6>
              <input type="file" id="image2File" class="form-control-file">
              <button class="btn btn-primary mt-2" onclick="uploadFile('image2', this)">Upload Image 2</button>
            </div>
            <hr>
            <div class="form-group" id="videoUploadField">
              <h6 for="videoFile">Video:</h6>
              <input type="file" id="videoFile" class="form-control-file" accept="video/*">
              <button class="btn btn-primary mt-2" onclick="uploadFile('video', this)">Upload Video</button>

            </div>
          </div>
        </div>
      </div>
      <footer class="main-footer">
        <div class="footer-left">
          <a href="#">Orange eXtended Store</a>
        </div>
        <div class="footer-right">
        </div>
      </footer>
    </div>
  </div>
  <!-- General JS Scripts -->
  <script src="assets/js/app.min.js"></script>

  <!-- JS Libraies -->
  <script src="assets/bundles/apexcharts.min.js"></script>
  <script src="assets/bundles/jquery.sparkline.min.js"></script>
  <script src="assets/bundles/chart.js"></script>
  <script src="assets/bundles/datatables/datatables.min.js"></script>
  <script src="assets/bundles/datatables/DataTables-1.10.16/js/dataTables.bootstrap4.min.js"></script>
  <script src="assets/bundles/datatables/export-tables/dataTables.buttons.min.js"></script>
  <script src="assets/bundles/datatables/export-tables/buttons.flash.min.js"></script>
  <script src="assets/bundles/datatables/export-tables/jszip.min.js"></script>
  <script src="assets/bundles/datatables/export-tables/pdfmake.min.js"></script>
  <script src="assets/bundles/datatables/export-tables/vfs_fonts.js"></script>
  <script src="assets/bundles/datatables/export-tables/buttons.print.min.js"></script>
  <script src="assets/js/page/index.js"></script>
  <script src="assets/js/scripts.js"></script>
  <script src="assets/js/custom.js"></script>
  <script>
    function chooseOption(option) {
      // Show the media upload modal
      $('#mediaUploadModal').modal('show');

      // Show the upload form
      $('#uploadForm').show();

      // Hide or show the video upload field based on the option chosen
      if (option === 1) {
        $('#videoUploadField').hide(); // Hide the video upload field
      } else {
        $('#videoUploadField').show(); // Show the video upload field
      }
    }
  </script>
  <script>
    function uploadFile(fieldName, uploadButton) {
      // Get the file input associated with the upload button
      const fileInput = uploadButton.previousElementSibling;

      // Check if a file is selected
      if (fileInput.files.length === 0) {
        // If no file is selected, show an alert and return
        showAlert("Please select a file to upload.");
        return;
      }

      // Get the selected file
      const file = fileInput.files[0];

      // Create FormData and append the file and field name
      const formData = new FormData();
      formData.append('fieldName', fieldName);
      formData.append('media', file);

      // Get the bearer token from localStorage
      const bearerToken = localStorage.getItem('bearerToken');

      // Check if the token exists
      if (bearerToken) {
        // Add the bearer token to the Authorization header
        $.ajaxSetup({
          headers: {
            'Authorization': 'Bearer ' + bearerToken
          }
        });
      }

      // Send the AJAX request
      const settings = {
        async: true,
        crossDomain: true,
        url: 'https://marketplace-1-5g2u.onrender.com/media/uploadMedia',
        method: 'POST',
        processData: false,
        contentType: false,
        data: formData
      };

      $.ajax(settings)
        .done(function (response) {
          console.log(response);
          // Show upload success alert
          showAlert("Upload Media Done with Success !");
        })
        .fail(function (xhr, status, error) {
          console.error(xhr.responseText);
          // Show upload error alert
          showAlert('Upload Media Failed !');
        });
    }


    function showAlert(message) {
      // Show a simple popup alert
      alert(message);

      // Automatically close the alert after 5 seconds
      setTimeout(function () {
        // Close the alert
        closeAlert();
      }, 2500);
    }

    function closeAlert() {
      alert.closeAlert();
      // No need to do anything as browser alerts automatically close
    }

    // Function to fetch the balance and display it
    function fetchBalance() {
      const email = "test_partner@gmail.com"; // Set the email

      fetch('https://marketplace-1-5g2u.onrender.com/auth/show-balance', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ email: email }) // Include the request body
      })
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok ' + response.statusText);
          }
          return response.json();
        })
        .then(data => {
          document.getElementById('balance-amount').textContent = data.balance;
        })
        .catch(error => {
          console.error('Failed to fetch balance:', error);
          document.getElementById('balance-amount').textContent = 'Error';
        });
    }

    // Call the fetchBalance function when the page loads
    document.addEventListener('DOMContentLoaded', function () {
      fetchBalance();
    });
  </script>
</body>

</html>